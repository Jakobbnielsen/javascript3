<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <link type="text/css" rel="stylesheet" href="style.css">
    <title>Noteify</title>
  </head>
  <body>
      <ul class="menu">
        <li><a href="#"><span onclick="SetNote(null, 'text1')">New note</span></a></li>
        <li><a href="#">Delete note</a></li>
        <li><a href="#"><span onclick="SetNote(currentId, 'text1')">Save note</span></a></li>
      </ul>
<textarea id="text1" cols="30" rows="10" placeholder="Title"></textarea>
<aside>
  <ul id="list">
  </ul>
</aside>
  </body>
</html>


<script>
//localStorage.clear();
function SetNote(p_note, id) {
  var saveNote = document.getElementById(id).value;
    localStorage.setItem(p_note, saveNote);
    if(p_note == null)
    {
      currentMax += 1;
      localStorage.setItem('currentMax', currentMax);
    noteArray.push('<li><a href="#" id="note'+currentMax+'"><span id="spannote'+currentMax+'" onclick="getNote(\'text1\', this)">Note'+currentMax+'</span></a></li>');
     document.getElementById("list").innerHTML+= noteArray[noteArray.length-1];
    }
    var noteArrayString = JSON.stringify(noteArray);
    localStorage.setItem("list", noteArrayString);

    var noteArrayStringBackToArray = JSON.parse(noteArrayString)
}

function getNote(p_note, id, obj) {
  var note = localStorage.getItem(obj.id);
  if(note !=null) {
    document.getElementById(id).value=note;
  } else {
    document.getElementById(id).value="noten er tom";
  }
currentId = obj.id
}

var currentMax = Number(localStorage.getItem('currentMax'));
if (currentMax==null)
{
  currentMax = 1;
}


var currentId;

var noteArray = [];
for (var i = 0; i < noteArray.length; i++)
{
  document.getElementById("list").innerHTML+= noteArray[noteArray.length-1];
}


</script>
